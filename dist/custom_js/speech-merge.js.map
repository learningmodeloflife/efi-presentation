{"version":3,"file":"speech-merge.js","sources":["../../js/custom_js/speech-merge.js"],"sourcesContent":["export function initializeSpeechMerge() {\n    window.addEventListener('load', () => {\n        if (typeof Reveal !== 'undefined') {\n            Reveal.on('fragmentshown', event => {\n                if (event.fragment.classList.contains('merge-trigger')) {\n                    mergeTexts(event.fragment.closest('.speech-slide'));\n                }\n            });\n        }\n    });\n\n    async function mergeTexts(slideElement) {\n        const containers = Array.from(slideElement.querySelectorAll('.speech-container'));\n        const speechesContainer = slideElement.querySelector('.speeches-container');\n        \n        // Get all text content and split into words\n        const allWords = containers.map(container => \n            container.textContent.trim().split(/\\s+/)\n        ).flat();\n        \n        // Shuffle words\n        const shuffledWords = shuffleArray(allWords);\n        \n        // Create fade out animation\n        const fadeOut = { opacity: [1, 0] };\n        const fadeIn = { opacity: [0, 1] };\n        \n        // Fade out all containers\n        await Promise.all(containers.map(container =>\n            container.animate(fadeOut, { \n                duration: 1000, \n                fill: 'forwards' \n            }).finished\n        ));\n\n        // Prepare merged text in center container\n        const centerContainer = containers[1];\n        centerContainer.innerHTML = shuffledWords.join(' ');\n        \n        // Add merged class to slide for CSS styling\n        slideElement.classList.add('merged');\n        \n        // Position center container to span full width\n        centerContainer.style.width = '100%';\n        centerContainer.style.position = 'absolute';\n        centerContainer.style.left = '50%';\n        centerContainer.style.transform = 'translateX(-50%)';\n        \n        // Hide other containers\n        containers[0].style.display = 'none';\n        containers[2].style.display = 'none';\n        \n        // Adjust speeches container\n        speechesContainer.style.width = '100%';\n        speechesContainer.style.padding = '0 calc(100% / 12)';\n        \n        // Fade in merged text\n        await centerContainer.animate(fadeIn, { \n            duration: 1000, \n            fill: 'forwards' \n        }).finished;\n    }\n\n    function shuffleArray(array) {\n        const newArray = [...array];\n        for (let i = newArray.length - 1; i > 0; i--) {\n            const j = Math.floor(Math.random() * (i + 1));\n            [newArray[i], newArray[j]] = [newArray[j], newArray[i]];\n        }\n        return newArray;\n    }\n}"],"names":["initializeSpeechMerge","window","addEventListener","Reveal","on","event","fragment","classList","contains","async","slideElement","containers","Array","from","querySelectorAll","speechesContainer","querySelector","shuffledWords","array","newArray","i","length","j","Math","floor","random","shuffleArray","map","container","textContent","trim","split","flat","fadeOut","opacity","fadeIn","Promise","all","animate","duration","fill","finished","centerContainer","innerHTML","join","add","style","width","position","left","transform","display","padding","mergeTexts","closest"],"mappings":"AAAO,SAASA,IACZC,OAAOC,iBAAiB,QAAQ,KACN,oBAAXC,QACPA,OAAOC,GAAG,iBAAiBC,IACnBA,EAAMC,SAASC,UAAUC,SAAS,kBAOlDC,eAA0BC,GACtB,MAAMC,EAAaC,MAAMC,KAAKH,EAAaI,iBAAiB,sBACtDC,EAAoBL,EAAaM,cAAc,uBAQ/CC,EA0CV,SAAsBC,GAClB,MAAMC,EAAW,IAAID,GACrB,IAAK,IAAIE,EAAID,EAASE,OAAS,EAAGD,EAAI,EAAGA,IAAK,CAC1C,MAAME,EAAIC,KAAKC,MAAMD,KAAKE,UAAYL,EAAI,KACzCD,EAASC,GAAID,EAASG,IAAM,CAACH,EAASG,GAAIH,EAASC,GACxD,CACA,OAAOD,CACX,CAjD0BO,CALLf,EAAWgB,KAAIC,GAC5BA,EAAUC,YAAYC,OAAOC,MAAM,SACrCC,QAMIC,EAAU,CAAEC,QAAS,CAAC,EAAG,IACzBC,EAAS,CAAED,QAAS,CAAC,EAAG,UAGxBE,QAAQC,IAAI1B,EAAWgB,KAAIC,GAC7BA,EAAUU,QAAQL,EAAS,CACvBM,SAAU,IACVC,KAAM,aACPC,YAIP,MAAMC,EAAkB/B,EAAW,GACnC+B,EAAgBC,UAAY1B,EAAc2B,KAAK,KAG/ClC,EAAaH,UAAUsC,IAAI,UAG3BH,EAAgBI,MAAMC,MAAQ,OAC9BL,EAAgBI,MAAME,SAAW,WACjCN,EAAgBI,MAAMG,KAAO,MAC7BP,EAAgBI,MAAMI,UAAY,mBAGlCvC,EAAW,GAAGmC,MAAMK,QAAU,OAC9BxC,EAAW,GAAGmC,MAAMK,QAAU,OAG9BpC,EAAkB+B,MAAMC,MAAQ,OAChChC,EAAkB+B,MAAMM,QAAU,0BAG5BV,EAAgBJ,QAAQH,EAAQ,CAClCI,SAAU,IACVC,KAAM,aACPC,QACP,CAxDgBY,CAAWhD,EAAMC,SAASgD,QAAQ,iBACtC,GAER,GA+DR"}