{"version":3,"file":"speech-merge.js","sources":["../../js/custom_js/speech-merge.js"],"sourcesContent":["export function initializeSpeechMerge() {\n    window.addEventListener('load', () => {\n        if (typeof Reveal !== 'undefined') {\n            Reveal.on('fragmentshown', event => {\n                if (event.fragment.classList.contains('merge-trigger')) {\n                    mergeTexts(event.fragment.closest('.speech-slide'));\n                }\n            });\n        }\n    });\n\n    async function mergeTexts(slideElement) {\n        const containers = Array.from(slideElement.querySelectorAll('.speech-container'));\n        \n        // First, set the initial colors for each container\n        containers[0].style.color = '#011627';\n        containers[1].style.color = '#f71735';\n        containers[2].style.color = '#57886c';\n        \n        // Get all text content and split into words with color information\n        const allWords = containers.map((container, index) => {\n            const words = container.textContent.trim().split(/\\s+/);\n            return words.map(word => ({\n                text: word,\n                color: container.style.color\n            }));\n        }).flat();\n        \n        // Shuffle words while preserving their colors\n        const shuffledWords = shuffleArray(allWords);\n        \n        // Create fade out animation\n        const fadeOut = { opacity: [1, 0] };\n        const fadeIn = { opacity: [0, 1] };\n        \n        // Fade out all containers\n        await Promise.all(containers.map(container =>\n            container.animate(fadeOut, { \n                duration: 1000, \n                fill: 'forwards' \n            }).finished\n        ));\n\n        // Prepare merged text in center container with preserved colors\n        const centerContainer = containers[1];\n        centerContainer.innerHTML = shuffledWords.map(word => \n            `<span class=\"word\" style=\"color: ${word.color}\">${word.text}</span>`\n        ).join(' ');\n        \n        // Add merged class to slide for CSS styling\n        slideElement.classList.add('merged');\n        \n        // Position center container\n        centerContainer.style.width = '100%';\n        centerContainer.style.position = 'absolute';\n        centerContainer.style.left = '50%';\n        centerContainer.style.transform = 'translateX(-50%)';\n        \n        // Hide other containers\n        containers[0].style.display = 'none';\n        containers[2].style.display = 'none';\n        \n        // Fade in merged text\n        await centerContainer.animate(fadeIn, { \n            duration: 1000, \n            fill: 'forwards' \n        }).finished;\n    }\n\n    function shuffleArray(array) {\n        const newArray = [...array];\n        for (let i = newArray.length - 1; i > 0; i--) {\n            const j = Math.floor(Math.random() * (i + 1));\n            [newArray[i], newArray[j]] = [newArray[j], newArray[i]];\n        }\n        return newArray;\n    }\n}"],"names":["initializeSpeechMerge","window","addEventListener","Reveal","on","event","fragment","classList","contains","async","slideElement","containers","Array","from","querySelectorAll","style","color","shuffledWords","array","newArray","i","length","j","Math","floor","random","shuffleArray","map","container","index","textContent","trim","split","word","text","flat","fadeOut","opacity","fadeIn","Promise","all","animate","duration","fill","finished","centerContainer","innerHTML","join","add","width","position","left","transform","display","mergeTexts","closest"],"mappings":"AAAO,SAASA,IACZC,OAAOC,iBAAiB,QAAQ,KACN,oBAAXC,QACPA,OAAOC,GAAG,iBAAiBC,IACnBA,EAAMC,SAASC,UAAUC,SAAS,kBAOlDC,eAA0BC,GACtB,MAAMC,EAAaC,MAAMC,KAAKH,EAAaI,iBAAiB,sBAG5DH,EAAW,GAAGI,MAAMC,MAAQ,UAC5BL,EAAW,GAAGI,MAAMC,MAAQ,UAC5BL,EAAW,GAAGI,MAAMC,MAAQ,UAG5B,MASMC,EAwCV,SAAsBC,GAClB,MAAMC,EAAW,IAAID,GACrB,IAAK,IAAIE,EAAID,EAASE,OAAS,EAAGD,EAAI,EAAGA,IAAK,CAC1C,MAAME,EAAIC,KAAKC,MAAMD,KAAKE,UAAYL,EAAI,KACzCD,EAASC,GAAID,EAASG,IAAM,CAACH,EAASG,GAAIH,EAASC,GACxD,CACA,OAAOD,CACX,CA/C0BO,CATLf,EAAWgB,KAAI,CAACC,EAAWC,IAC1BD,EAAUE,YAAYC,OAAOC,MAAM,OACpCL,KAAIM,IAAS,CACtBC,KAAMD,EACNjB,MAAOY,EAAUb,MAAMC,YAE5BmB,QAMGC,EAAU,CAAEC,QAAS,CAAC,EAAG,IACzBC,EAAS,CAAED,QAAS,CAAC,EAAG,UAGxBE,QAAQC,IAAI7B,EAAWgB,KAAIC,GAC7BA,EAAUa,QAAQL,EAAS,CACvBM,SAAU,IACVC,KAAM,aACPC,YAIP,MAAMC,EAAkBlC,EAAW,GACnCkC,EAAgBC,UAAY7B,EAAcU,KAAIM,GACzC,oCAAmCA,EAAKjB,UAAUiB,EAAKC,gBAC1Da,KAAK,KAGPrC,EAAaH,UAAUyC,IAAI,UAG3BH,EAAgB9B,MAAMkC,MAAQ,OAC9BJ,EAAgB9B,MAAMmC,SAAW,WACjCL,EAAgB9B,MAAMoC,KAAO,MAC7BN,EAAgB9B,MAAMqC,UAAY,mBAGlCzC,EAAW,GAAGI,MAAMsC,QAAU,OAC9B1C,EAAW,GAAGI,MAAMsC,QAAU,aAGxBR,EAAgBJ,QAAQH,EAAQ,CAClCI,SAAU,IACVC,KAAM,aACPC,QACP,CA9DgBU,CAAWjD,EAAMC,SAASiD,QAAQ,iBACtC,GAER,GAqER"}